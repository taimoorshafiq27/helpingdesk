<div class="py-6 px-8 rounded bg-white">
<%= form_with model: @ticket do |form| %>
    <%= form.hidden_field :client_id, value: current_user.id if current_user.client? %>
    <div class="flex flex-col pb-6">
        <% if current_user.admin? || current_user.agent? %>
            <%= form.label :assignee_id, "Agent", class: "pb-1" %>
            <%= form.collection_select :assignee_id, User.where(id: User.all.select { |user| user.admin? || user.agent? }), :id, :first_name, { prompt: "" }, class: "py-1 rounded border border-gray-300 border focus:outline-sky-600" %>
            <%= form.label :client_id, "Client", class: "pb-1" %>
            <%= form.collection_select :client_id, User.where(id: User.all.select { |user| user.client? }), :id, :first_name, { prompt: "" }, class: "py-1 rounded border border-gray-300 border focus:outline-sky-600" %>
        <% elsif current_user.client? %>
            <%= form.label :client_id, "Client", class: "pb-1" %>
        <% else %>
            <p>Please contact an admin to assign you a role in order to make tickets</p>
        <% end %>
    </div>
    <div class="flex flex-col pb-6">
        <%= form.label :title, class: "pb-1" %>
        <%= form.text_field :title, class: "py-1 rounded border-solid border-gray-300 border focus:outline-sky-600" %>
    </div>
    <div class="flex flex-col pb-6">
        <%= form.label :description, class: "pb-1" %>
        <%= form.text_area :description, size: "30x15", class: "py-1 rounded border-solid border-gray-300 border focus:outline-sky-600" %>
    </div>
    <div class="flex flex-col pb-6">
        <%= form.label :category, class: "pb-1" %>
        <%= form.collection_select :category, Ticket.categories.keys, :to_s, :humanize, { prompt: "" }, class: "py-1 rounded border border-gray-300 border focus:outline-sky-600" %>    
    </div>
    <div class="flex flex-col pb-6">
        <%= form.label :status, class: "pb-1" %>
        <%= form.collection_select :status, Ticket.statuses.keys, :to_s, :humanize, { prompt: "" }, class: "py-1 rounded border-solid border-gray-300 border focus:outline-sky-600" %>
    </div>
    <%# if current_user == admin? %>
        <%#= form.text_field :assignee_id %>
    <%# end %>
    <div>
        <%= form.submit class: "px-2 py-1 rounded bg-sky-500 text-white hover:bg-sky-600" %>
    </div>
<% end %>
</div>